{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}
{% set title = "Metapilot Settings" %}

{% block content %}
    <form method="post" accept-charset="UTF-8">
        {{ csrfInput() }}
        {{ hiddenInput('action', 'plugins/save-plugin-settings') }}
        {{ hiddenInput('pluginHandle', 'metapilot') }}

        {{ forms.textField({
            label: 'OpenAI API Key',
            instructions: 'Enter your OpenAI API key to enable AI-powered meta content generation.',
            name: 'openAiApiKey',
            value: settings.openAiApiKey,
            type: 'password',
            required: true,
            errors: settings.getErrors('openAiApiKey')
        }) }}

        {{ forms.selectField({
            label: 'OpenAI Model',
            instructions: 'Choose the OpenAI model to use for content generation.',
            name: 'openAiModel',
            value: settings.openAiModel,
            options: [
                { value: 'gpt-4o-mini', label: 'GPT-4o Mini (Recommended)' },
                { value: 'gpt-4o', label: 'GPT-4o' },
                { value: 'gpt-3.5-turbo', label: 'GPT-3.5 Turbo' }
            ],
            errors: settings.getErrors('openAiModel')
        }) }}

        {{ forms.lightswitchField({
            label: 'Overwrite Existing Values',
            instructions: 'If enabled, AI generation will overwrite existing meta content.',
            name: 'overwriteExisting',
            on: settings.overwriteExisting,
            errors: settings.getErrors('overwriteExisting')
        }) }}

        <div class="buttons">
            <input type="submit" class="btn submit" value="Save">
        </div>
    </form>
{% endblock %}